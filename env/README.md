## env.txt文件说明
- 节点在K8s中的分布  
```"host_list": [2,4]```  
节点id属于(0, 2]的部署到第1台K8s物理机上，(2, 4]的部署到第2台K8s物理机上，类推  
- BFS遍历的etree结构  
```
"list": [
	{"id": 1, "dc": 2, "layer": 3, "sync": 10},
	{"id": 1, "dc": 2, "layer": 2, "sync": 2},
	{"id": 3, "dc": 2, "layer": 2, "sync": 2},
	{"id": 1, "dc": 0, "layer": 1, "sync": 0},
	{"id": 2, "dc": 0, "layer": 1, "sync": 0},
	{"id": 3, "dc": 0, "layer": 1, "sync": 0},
	{"id": 4, "dc": 0, "layer": 1, "sync": 0}
	]
```
id：节点编号，dc：子节点数量，layer：当前层数，sync：聚合频率  
对应下面的示例网络结构  
- 各个节点的对应数据，训练节点才用  
```
"round": [20, 20, 20, 20]
"local_epoch_num": [1, 1, 1, 1]
"batch_size": [1, 1, 1, 1]
"learning_rate": [0.05, 0.05, 0.05, 0.05]
"start_index": [0, 0, 0, 0]
"end_index": [1, 1, 1, 1]
"worker_fraction": [1, 1, 1, 1]
```
index=0代表id=1的节点数据，类推，有多少节点就要写多长  
只有在最底层作为训练节点的时候才用，不用也要随便赋个值占位置，定义见下文  

##示例网络结构
![网络结构](../default_network.png)

## .env文件说明，以n1.env为例
- 类型，0: EL，1: FL  
```"type": 0```  
gen.py生成的默认type=0  
- 同时处于多少层  
```"layer_count": 3```

- 下面例子中使用[ ]为key值的，即使节点只处于一层也要用[ ]  

- 分别属于哪些层，1为最底层  
```"layer": [1,2,3]```  
注意，EL中节点可以同时负责训练和聚合，但FL中不要让聚合节点同时作为训练节点  
- 节点位于每层的上层节点地址  
```"up_addr": ["self","self","top"]```  
当节点同时处于多层，且上层节点仍为自己时，用self代替完全的地址  
当节点处于最顶层时，该层up_addr置为top  
- 节点和上层节点之间的带宽  
```"up_bw": [0,0,0]```  
单位是MByte/s  
当上层是self或者top的时候置0  
- 节点位于每层的下层节点数量  
```"down_count": [0,2,2]```  
当节点处于最底层为训练节点时，该层的down_count置为0  
- 节点位于每层的下层节点地址  
```"down_addr": [[],["self","http://s-etree:8002"],["self","http://s-etree:8003"]]```  
s-etree是k8s中自定义的service的名字，并不固定  
8002是对应节点的端口号，也不固定  
即使节点只处于一层也要用[[ ]]  
- 节点和下层节点之间的带宽  
```"down_bw": [[],[0,2],[0,2]```  
单位是MByte/s  
- EL中每层的同步频率  
```"sync": [0,2,10]```  
当节点处于最底层为训练节点时，该层的sync置为0  
当节点处于最顶层时，该层sync控制整个训练过程的聚合次数，当最顶层达到sync次聚合后，训练结束  

- 下面的参数不是训练节点可以随便赋个值  

- 用来将训练数据划分成一定数量的batch，正考虑换个名称  
```"round": 20```  
- 本地训练次数  
```"local_epoch_num": 1```  
- 每次训练用多少个样本  
```"batch_size": 1```  
- 学习率  
```"learning_rate": 0.05```  
- 训练样本范围，[start_index, end_index)  
```"start_index": 0```  
```"end_index": 1```  
- FL聚合节点专用，每轮选多少比例的节点训练，EL中赋值为1  
```"worker_fraction: 1"```  
